"use strict";$(".open-email-modal").on("click",function(){$(".profile-modal").css("display","flex"),$(".existing-mail-container").show(),$(".otp-container , .new-email-container").hide()}),$(".modal-close-btn").on("click",function(){$(".profile-modal, .password-modal").css("display","none")}),$(document).on("mousedown",function(a){0<$(a.target).closest("#modal-main").length||0<$(a.target).closest(".open-email-modal").length||$(".profile-modal, .password-modal").css("display","none")}),$(".mainForm").on("submit",function(a){a.preventDefault(),$.ajax({url:UPDATE_PROFILE,type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,dataType:"JSON",beforeSend:()=>{$(".update-profile-loader").removeClass("hidden"),$(".update-profile-button").attr("disabled","disabled")},success:function(a){toastMixin.fire({title:a.message,icon:"fail"==a.status?"error":a.status})},complete:()=>{$(".update-profile-loader").addClass("hidden"),$(".update-profile-button").removeAttr("disabled")}})}),$(".open-password-modal").on("click",function(){$(".password-modal").css("display","flex"),$(".password-modal-container").show()}),$("#close-btn").on("click",function(){$("#updatePasswordForm").trigger("reset")}),$("#otpForm-close-btn").on("click",function(){$("#otpForm").trigger("reset")}),$("#updateEmailForm-close-btn").on("click",function(){$("#updateEmailForm").trigger("reset")}),$("#updatePasswordForm").on("submit",function(a){a.preventDefault();var b=$("#old_password").val(),c=$("#new_password").val(),d=$("#confirm_password").val(),e=$("input[name=\"_token\"]").val();$.ajax({url:UPDATE_PASSWORD,type:"POST",data:{old_password:b,new_password:c,confirm_password:d,_token:e},dataType:"JSON",beforeSend:()=>{$(".password-loader").removeClass("hidden")},success:function(a){"success"==a.status?($(".password-modal").css("display","none"),$(".password-modal-container").hide(),$("#updatePasswordForm").trigger("reset")):"fail"==a.status&&$(".password-modal-container").show(),toastMixin.fire({title:a.message,icon:"fail"==a.status?"error":a.status})},complete:()=>{$(".password-loader").addClass("hidden")},error:function(){$(".password-modal-container").hide()}})}),$("#checkEmailForm").on("submit",function(a){a.preventDefault();var b=$("#email").val(),c=$("input[name=\"_token\"]").val();$.ajax({url:VERIFY_EMAIL,type:"POST",data:{email:b,_token:c},dataType:"JSON",beforeSend:()=>{$(".email-loader").removeClass("hidden")},success:function(a){"success"==a.status?"token"===a.preference?($(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()):($(".otp-container").show(),$(".existing-mail-container, .new-email-container").hide()):"fail"==a.status&&($(".existing-mail-container").show(),$(".otp-container, .new-email-container").hide()),toastMixin.fire({title:a.message,icon:"fail"==a.status?"error":a.status})},complete:()=>{$(".email-loader").addClass("hidden")},error:function(){$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()}})}),$("#otpForm").on("submit",function(a){a.preventDefault();var b=$("#otp").val(),c=$("input[name=\"_token\"]").val();$.ajax({url:VERIFY_OTP,type:"POST",data:{otp:b,_token:c},dataType:"JSON",beforeSend:()=>{$(".email-loader").removeClass("hidden")},success:function(a){"success"==a.status?($(".new-email-container").show(),$(".existing-mail-container, .otp-container").hide()):"fail"==a.status&&($(".otp-container").show(),$(".existing-mail-container, .new-email-container").hide()),$("#otpForm").trigger("reset"),toastMixin.fire({title:a.message,icon:"fail"==a.status?"error":a.status})},complete:()=>{$(".email-loader").addClass("hidden")},error:function(){$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()}})}),$("#updateEmailForm").on("submit",function(a){a.preventDefault();var b=$("#new_email").val(),c=$("input[name=\"_token\"]").val();$.ajax({url:UPDATE_EMAIL,type:"POST",data:{new_email:b,_token:c},dataType:"JSON",beforeSend:()=>{$(".email-loader").removeClass("hidden")},success:function(a){"success"==a.status?($("#update_email").val(b),$("#email").val(b),$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide(),$("#updateEmailForm").trigger("reset")):"fail"==a.status&&($(".new-email-container").show(),$(".existing-mail-container, .otp-container").hide()),toastMixin.fire({title:a.message,icon:"fail"==a.status?"error":a.status})},complete:()=>{$(".email-loader").addClass("hidden")},error:function(){$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()}})});
